<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yaouguoji.platform.mapper.NowTotalPeopleMapper">
    <select id="totalPeople" parameterType="java.util.Date" resultType="java.util.Map">
        select sum(o.cr_number) totalPeople
        from camera_record o,(
                              SELECT  camera_id  ,MAX(cr_add_time) addTime
                              FROM camera_record
                              GROUP BY camera_id)n
        where o.camera_id=n.camera_id and o.cr_add_time=n.addTime
    </select>
</mapper>